<pre style="font-family:Meiryo;">
</pre>

----------==========----------==========----------==========----------

■まとめだニャ２０２２年０５月号

[ ０５月１０日 ]

◇ニューフィーチャー

■neutral/bmp/filter.c, color.c, draw.c, _fastcopy()

n_bmp_blendcopy() が１０％速くなったニャ
n_bmp_antialias() が５％速くなったニャ
n_bmp_rasterizer() が少し速くなったニャ

n_bmp_blend_channel() が１％速くなったニャ

n_bmp_roundrect() が１％速くなったニャ

n_bmp_fastcopy() が少し速くなったニャ

■neutral/memory.c

https://github.com/skywind3000/FastMemcpy
このサイトにある memcpy_fast() を使うようにしたニャ
いろんな処理がびっくりするぐらい速くなるニャ
元々速いものは軽く、重たいものは軽くなるニャ

■neutral/posix.c

n_posix_loop を作ったニャ
while( 1 ) より for(;;) の方が１％速いことが分かったためだニャ

■CatPad / TxtBox

EOL マークをオンにすると縦スクロールバーが上書きされてしまうのを直したニャ

右マージンが大きすぎるのを直したニャ

■猫の手

GetTickCount() から timeGetTime() に変更したニャ

■Watchcat

GetTickCount() から timeGetTime() に変更したニャ

■project/macro.c

ダイアログを win32/win_richdialog.c ベースに置き換えたニャ
ダークモード対応ができないからだニャ

■win32/gdi.c

システムアイコンをロードできるようになったニャ
MAKEINTRESOURCE() が使えないので特別な名前を与えると翻訳するニャ

N_GDI_FRAME_FLUENT_UI を FLUENT_CHK に変更したニャ
そして FLUENT_BTN を新しく追加したニャ

■Pen Trainer

Fluent UI がオンでダークモードの時の見た目を変えたニャ


◇バグフィクス

■Nonnon Paint

リサイザーでキャンバスサイズを変更しても再描画されないのを直したニャ
自動処理には限界があるのでリフレッシュボタンが付いたニャ

■win32/win_richdialog.c

カウントを２と同じかそれ以下にするとクラッシュするのを直したニャ

最小サイズをセットすることにしたニャ
デスクトップの１０％か 200px のいずれか大きい方だニャ

■Marie

スクロールバーのラウンドエッジが黒になるのを直したニャ

■neutral/bmp.c

n_bmp_flush() の高速化コードが２重処理になっているのを直したニャ
不覚にもリターンしていなかったニャ


[ ０５月２０日 ]

◇ニューフィーチャー

■タイマー

たなぼたでゲームループ時に Sleep( 1 ) を、
PeekMessage() が false の時に実行しないといけないのに気付いたニャ
常に実行するとパフォーマンスが悪くなるニャ

■win32/gdi.c

水玉模様にピッチが付けられるようになったニャ
INI2GDI に "base_margin" が新設されているので値をセットするニャ

■neutral/bmp/detect.c, draw.c

n_bmp_squircle() が実装されたニャ

iPhone とか Android で見かける辺が曲線になっているラウンドレクトだニャ

■OrangeCat

スタイルに "Material" が追加されたニャ
Google 的な感じのものだニャ

Item View の描画が少し高速になったニャ


◇バグフィクス

■Nyaurism

Formatter の CPU 負荷が高いのを直したニャ

■win32/win_groupbox.c

サイズが小さくなるとと描画エラーが出るのを直したニャ

■win32/win_inputpopup.c

タイマーの ID がゼロになっている問題を直したニャ
タイマーの HWND が初期化と終了で違うのを直したニャ

フェードアウト時に描画が乱れるので自力で実装したニャ

■all

WM_TIMER で WPARAM がゼロの時に入ってしまうのを直したニャ
Project Nonnon としてはゼロは特別で未初期化という意味になるニャ

AnimateWindow() がフレイキーなのでフェードを自力で実装したニャ
Input Popup と Combobox の２つを置き換えたニャ

■Nekomimi Nina

スタート時の固定カメラを廃止したニャ
ウィンドウをリサイズすると誤作動するためだニャ

■CatPad

n_catpad_main() はスタンドアロン版でしか実装されていないかったニャ
このファイルは要らないことが分かったので廃止したニャ

■neutral/bmp/pattern.c

水玉の余白計算に誤りがあったニャ
何をセットしても変化がないのを直したニャ

■Nonnon Paint

マルチレイヤーで "Whole Grab" で複数選択して "Clear Canvas" するとクラッシュするのを直したニャ

■win32/win_combobox.c

フェードアウトがポップアップと本体で同期しないのを直したニャ
スクロールバー領域が空白になるのも直したニャ


[ ０５月３０日 ]

◇ニューフィーチャー

■GameConsole / NonnonApps

Welcome! のダイアログがダークモードに対応したニャ

■Nonnon Paint

少し軽く・高速になったニャ


◇バグフィクス

■CatPad

履歴ポップアップで空文字列が登録されてしまうのを直したニャ

----------==========----------==========----------==========----------

