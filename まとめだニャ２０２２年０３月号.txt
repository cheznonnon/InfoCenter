<pre style="font-family:Meiryo;">
</pre>

----------==========----------==========----------==========----------

■まとめだニャ２０２２年０３月号

[ ０３月１０日 ]

◇ニューフィーチャー

■neutral/string.c

n_string_int2str() が実装されたニャ
printf() 系 API の "%lld" の問題に対処するためのものだニャ
64-bit 整数を文字列にするものだニャ
内部的には何ビットでも対応できるニャ


◇バグフィクス

■neutral/string_path.c

n_string_path_terminate() のコメントにタイポがあるのを直したニャ

■win32/win_inputpopup.c

一時的に廃止するニャ
理由はどうしても TxtBox と協調動作させることができないからだニャ
直せたら将来復活するニャ
多分無理だと思うニャ


[ ０３月２０日 ]

◇ニューフィーチャー

■win32/win_inputpopup.c

復活させたニャ
大分リファクタしたから使い方が変わるニャ

■win32/txtbox.c

全角文字が画面外に出る時に最後の文字が描画されないのを直したニャ

GrabNDrag ができるようになったニャ
今の所はトップレベルに仕掛けて欲しいニャ
というか深い所に置くとちゃんと動かないニャ

OPTION_EDITBOX_LINENUM が少し速くなったニャ

Vista 以降でフォントグリフのキャッシュを増やしたニャ
メモリを３倍食うニャ
でもスクロールとかは速く軽くなるニャ

n_win_txtbox_autofocus() に再描画オプションが付いたニャ
これでチューンすれば更に高速化できるニャ

■システムトレイアイコン

Explorer がクラッシュしたらアイコンを作り直すニャ
何もしないとゾンビプロセス化してしまうニャ
ちなみに RegisterWindowMessage( "TaskbarCreated" ) で作れるニャ

■win32/ole/*.c

少し研究を進めたニャ

■CatPad

TxtBox で GrabNDrag ができるようになったニャ
マウスの中ボタンでドラッグすると Nonnon Paint みたいにスクロールするニャ

スクロールが速く軽くなったニャ

■Felis

Win9x 以外で GrabNDrag ができるようになったニャ
Win9x はローレベルマウスフックというものが使えないからサポートできないニャ

■OrangeCat

GrabNDrag ができるようになったニャ


◇バグフィクス

■Nonnon Paint

レイヤーウィンドウでシフトを押しながら上下すると誤作動しているように見えるのを直したニャ

レイヤーウィンドウで配置を交換する時に重たいのを対処したニャ
移動してから５００ミリ秒してから再描画するニャ

■OrangeCat

検索ショートカットを作る機能にアクセス違反の問題が出たニャ
文字列リテラルにダブル NUL を付けていないという問題だったニャ

デスクトップのショートカットから起動するとビジーカーソルが出るのを直したニャ
File Explorer のバグだニャ

■Felis

Vista でブラウザが半透明になってしまうのを直したニャ

クラシックスタイルの時にアドレスバーが変なのを直したニャ
ボーダーの色と 16bpp のディスプレイの時の色の２点だニャ

X ボタンがアクティブでない時にもできるのを直したニャ

n_felis_is_draggable() が常に true を返すのを直したニャ

■CatPad

検索のバツボタンがフェードアウトする時にキャレットが少し不自然に動くのを直したニャ

ＣＰＵ使用率が異常に上がるのを直したニャ
スクロールバーの描画に複数の問題があったニャ

IME でキャレットが画面外にある時に有効にすると乱れるのを直したニャ


[ ０３月３０日 ]

◇ニューフィーチャー

■win32/win/grab_n_drag.c

Grab N Drag ヘルパーだニャ
なんかフレイキーだけど慣性（フリクション）が実装されているニャ
今の所は無効にされているニャ


◇バグフィクス

■win32/win_txtbox.c

ソースコードのタイポを直したニャ

Explorer とかタスクバーのホバーをするとスクロールバー領域が上書きされる問題を直したニャ
全行程４時間ぐらいかかったニャ
最適化の再描画領域が悪さをしていたニャ

----------==========----------==========----------==========----------

